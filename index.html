<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Threads Marketing App</title>
    <style>
        body { padding: 20px; background-color: #0f1419; color: white; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }
        .app-container { max-width: 500px; margin: 0 auto; display: flex; flex-direction: column; gap: 20px; }
        h2 { font-size: 1.5rem; margin-bottom: 5px; background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        p { color: #8899a6; font-size: 0.9rem; }
        label { font-weight: bold; font-size: 1rem; color: #fff; }
        textarea { width: 100%; height: 150px; padding: 15px; border-radius: 15px; border: 1px solid #333; background: #1d2125; color: white; font-size: 1rem; box-sizing: border-box; resize: none; }
        textarea:focus { border-color: #1d9bf0; outline: none; }
        .post-btn { padding: 18px; font-size: 1.1rem; font-weight: bold; border: none; border-radius: 50px; background-color: #fff; color: #000; cursor: pointer; transition: transform 0.1s; }
        .post-btn:active { transform: scale(0.98); background-color: #e6e6e6; }
        .post-btn:disabled { background-color: #555; color: #888; }
        .status { font-size: 0.9rem; text-align: center; color: #1d9bf0; min-height: 20px; }
    </style>
</head>
<body>
    <div class="app-container">
        <h2>Threads ë§ˆì¼€íŒ… ë§¤ë‹ˆì €</h2>
        <p>ì˜¤ëŠ˜ì˜ ì»¨ì…‰ì´ë‚˜ ì¶”ê°€ ì§€ì‹œì‚¬í•­ì„ ì…ë ¥í•˜ì„¸ìš”.</p>
        
        <label>ì‹¤ì‹œê°„ í”„ë¡¬í”„íŠ¸ ìˆ˜ì •</label>
        <textarea id="userPrompt" placeholder="ì˜ˆ: ë§íˆ¬ë¥¼ ì¡°ê¸ˆ ë” ë¶€ë“œëŸ½ê²Œ í•´ì¤˜ / 20ëŒ€ ì—¬ì„±ì´ ì“´ ê²ƒì²˜ëŸ¼ ì‘ì„±í•´ì¤˜"></textarea>
        
        <div id="statusMsg" class="status"></div>
        <button class="post-btn" onclick="runPost()">ğŸš€ ìŠ¤ë ˆë“œ ê²Œì‹œí•˜ê¸°</button>
    </div>

    <script>
        async function runPost() {
            const btn = document.querySelector('.post-btn');
            const statusMsg = document.getElementById('statusMsg');
            const customPrompt = document.getElementById('userPrompt').value;
            
            if(!confirm("ì„¤ì •í•œ ë‚´ìš©ìœ¼ë¡œ ê²Œì‹œë¬¼ì„ ìƒì„±í• ê¹Œìš”?")) return;

            btn.disabled = true;
            statusMsg.innerText = "í´ë¡œë“œê°€ ê¸€ì„ ì‘ì„±í•˜ê³  ì—…ë¡œë“œ ì¤‘...";

            try {
                // ë„¤íŠ¸ë¦¬íŒŒì´ í•¨ìˆ˜ í˜¸ì¶œ ì‹œ ì‚¬ìš©ìê°€ ì…ë ¥í•œ í”„ë¡¬í”„íŠ¸ë¥¼ ì „ë‹¬
                const response = await fetch(`/.netlify/functions/post_thread?extra=${encodeURIComponent(customPrompt)}`);
                const result = await response.json();
                
                alert(result.message);
                statusMsg.innerText = "ê²Œì‹œ ì™„ë£Œ!";
            } catch (error) {
                alert("ì—°ê²° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
                statusMsg.innerText = "ì˜¤ë¥˜ ë°œìƒ";
            } finally {
                btn.disabled = false;
                setTimeout(() => { statusMsg.innerText = ""; }, 3000);
            }
        }
    </script>
</body>
</html>